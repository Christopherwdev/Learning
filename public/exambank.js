
function extractQuestions(topics, n) {

    const questionBank = `
Explain how DNA is packaged into chromosomes
DNA is packaged and coiled around the histone proteins
They are called nucleosomes
Nucleosomes coil and fold into chromatin
Chromatin is then looped and folded
Chromosome is then condensed in prophase
DNA may undergo supercoiling
2 chromatins form 1 chromosome

Give a definition for the term immune cells
They are white blood cells
E.g. B cells, T cells
Developed from stem cells in the bone marrow
Helps the body fight pathogens

Explain sex linked diseases
Sex-linked disorder is caused by a faulty gene located on the sex chromosome
the disorder is more likely in one gender than another

Explain why sex-linked characteristics are more common in male than in female
Crossing over cannot form between the X and Y chromosomes
Because they are not homologous chromosomes 
X chromosome carries genes that are not present on the Y chromosome 
Male has only one copy of some genes 
If one allele inherited, it will be expressed

No equivalent homologous chromosome in the Y chromosome
No dominant allele is present to mask the recessive gene
So, the recessive allele on X chromosomes in males is always expressed
While females need two recessive alleles need to be homozygous recessive
Females could have dominant and recessive alleles
In this case, the female acts as a carrier of the recessive gene

Explain a mitotic phase that leads to some immune cells having no Y chromosomes
Anaphase, where spindle fibres can’t contract
Centromeres can’t split, chromosome not separated
So both Y chromatids are pulled to one pole
So one daughter cell has no Y chromosome, one daughter cell has 2

Explain how “some people have other combinations, such as XXY or XYY”
Homologous chromosomes of XX or chromosomes of XY can’t separate in meiosis
The egg cell will have XX or the sperm cell will have XY while the other have none
The egg cell, which has XX, when fuse with a sperm cell carrying Y, XXY will result
The sperm cell, which has XY, when fuse with an egg cell carrying X, XXY will result
The Y – carrying sperm cell may replicate its Y chromosome and YY result, when the sperm fuses with an X-carrying egg cell, XYY will result

How “nondisjunction of chromosome” could result in an individual with three copies of some gene? 
Failure of (a pair of) chromosomes to separate
During anaphase in meiosis
Resulting in a gamete with two copies of the same chromosome
Zygote receives two copies of the chromosome from one gamete and one from the other

How does the small size of Y chromosome in stem cells that produce immune cells lead to easy loss of it replicating DNA
Fewer nucleotides come during DNA replication compared with other chromosomes
Compared with other chromosomes, not having the same number of free nucleotides come during DNA replication account for a higher percentage
It makes DNA replication easier to fail
Larger sized chromosome will have lots of nucleotides coming, losing the same number of nucleotides will account for a smaller proportion

Explain why “stem cells that produce immune cells can survive if they happen to lose their Y when replicating their DNA”
Y chromosome is small and contain very few genes
So only few genes not transcribed, only few proteins not translated
There are still proteins for active transport, cell division, DNA replication
So stem cells can survive and divide and differentiate into other cells

Explain how losing other chromosomes will cause cells to die
The chromosomes contain many genes
So many genes not transcribed, many proteins not translated
No proteins for active transport and facilitated diffusion
Glucose and nutrients can’t enter cell so no respiration
No proteins for respiration, like ETCs, CoA
Cells can’t respire to produce ATP and die
No enzymes for metabolic reactions
So reaction rate is slow and cells can’t function
No proteins for cell division, DNA replication
So cells can’t divide

Explain how “Loss of this Y chromosome in immune cells correlates with higher rates of health problems”
Y chromosome has genes that code for proteins
Without Y chromosome, no proteins translated
No protein receptors on membrane
T helper cells can’t bind to antigen
T helper cells not activated
B cells not activated
No antibody produced
No immune response triggered
Risk of infecting diseases

Explain how “faulty DNA replication” causes Y chromosome loss
Mutation is change in DNA base sequence
Also DNA methylation
DNA polymerase can’t bind to promoter region
So DNA not replicated in S phase
So different gene in chromosome forms
So Y chromosome not recognized in mitosis and meiosis
Homologous chromosomes can’t pair up in prophase
Spindle fibres can’t attach to Y chromosome in metaphase
Y chromosome not separate in anaphase
So sperm gamete doesn’t have Y chromosome
Zygote doesn’t have Y chromosome from sperm gamete

Explain how CRISPR works
Guide RNA recognises the nucleotides by complementary base pairing 
Cas-9 enzyme cuts the part of gene 

Suggest the experiments that the researchers could have done to reach the conclusion that losing the Y chromosomes causes disease in the heart
One group of mice with Y chromosome removed from about two-thirds of the immune cells (this is from the text), the other group is control
CV: diet, temperature, age of mice etc.
After 1 year (this is from the text), check out if their heart muscle become scarred (DV)
t-test is used to confirm the difference is significant (Statistical analysis)

Explain what is scarring of heart muscle
Heart cardiac muscles damaged in injury
Cardiac muscle tissue replaced by fibrous tissue
Fibrous tissue accumulates in heart

Describe the advantages of animal testing 
could be beneficial to humans / important research that needs to be done 
rats have similar {immune system / physiology / hearts} to humans 
idea of rats being a useful animal model (genetically similar to each other / relatively cheap / easily obtained / have been used in many studies / short life cycle) 
not ethical to do the investigation with babies/humans 
to test for toxicity of drugs before human testing 

Describe the ethical issues of using mice in this study.
mice may be {harmed / killed}
using anaesthetics causes harm to mammals 
not ethical / benefits do not outweigh harm caused / animals cannot give consent 

Explain how “Scarring of heart muscle can contribute to some common types of heart disease, such as heart failure”
It triggers atherosclerosis
It leads to inflammatory responses, with white blood cells migrate into the area
There will be buildup of cholesterol
Plaque will be formed
The lumen of, e.g. coronary arteries will then be narrowed and blocked (there will be reduced blood flow and the cells will be deprived of oxygen / nutrients
The heart cells will die

Explain the molecular mechanism of the transforming growth factor beta in triggering heart scarring
TGF-B can't pass cell membrane, so bind to cell surface receptors
The complex formed is a protein kinase, which triggers cascade
The kinase enters nucleus
Activates a transcription factor (from SMAD2/3 to SMAD4)
Transcription factor SMAD4 causes DNA to be expressed
By binding them to the promoter region
RNA polymerase is recruited
By epigenetic modification
DNA methylation/ histone marks
The proteins translated by this gene results in production of fibroblast and differentiates to myofibroblast
Which binds to fibrin to form mesh and blood clot

Explain how “an antibody that blocks this growth factor reduced the harmful effects of the loss of the Y chromosome”
Antibody has antigen binding sites
That are complementary to and bind to TGF-B
Bind to 2 TGF-B for agglutination
Bind to TGF-B and phagocyte to opsonize TGF-B
So TGF-B broken down by phagocytes
So TGF-B won’t cause heart scarring

Explain the characteristics of the antibody that could block transforming growth factor beta
Antibody has antigen binding site
In this case it is specific, complementary in its structure to that of TGF-B
Upon binding, transforming growth factor beta can no longer bind to its receptor

Explain the future work that the researchers could do in the future to conclude the same approach
would benefit men who are losing their Y chromosomes
See appendix (drug testing protocol) 

Explain what is meant by “genetic variants”
Genetic variants are {alternative versions / alleles} of a gene
Due to changes in the base sequence of the DNA

Explain how “loss of the Y chromosome is linked with cancer”
Y chromosome contain many genes
So many genes not transcribed, many proteins not translated
No tumor suppressor gene, so no tumor suppressor protein translated
Cell won’t have apoptosis
So cell divides at uncontrolled unlimited rate and becomes cancer cell

Explain how “propensity for Y chromosome loss is caused by many genetic variants that raise the likelihood of DNA errors during cell division”
There will be a change in base sequence of DNA / deletion / substitution of bases
So different bases will be attracted during DNA replication in case of substitution / fewer bases
Attracted during DNA replication in case of deletion
Leading to different daughter DNA formed from parental one
The proteins produced will be different in shape
When these are histone protein core of the nucleosome which helps hold the Y chromosome, the Y chromosome will be lost

Explain how the “loss of the Y chromosome is linked with cancer”
The loss of a chromosome contributes to genomic instability
Cells with genomic instability are more likely to acquire additional mutations that can drive cancer progression
The Y chromosome may contain genes that may have roles in tumor suppression
Its loss could lead to uncontrolled and indefinite tumor cell division

Explain how “people born with XYY chromosomes experience different effects if they lose one of their Y chromosomes”
People with XYY has 2 copies of Y chromosome
Even if lose 1, other Y chromosome act as backup
The DNA genes are still transcribed, protein still translated
But only half the gene, so transcription and translation rate halves
Person will have XY, may return to normal without defects and genetic diseases

Explain one way on how chromosomes “swap bits when organisms reproduce”
Random independent assortment of homologous chromosomes in metaphase I
There is random aligning of the chromosomes
It leads to different combinations of the maternal and paternal chromosomes
Crossing over of alleles between chromatids in prophase I
The chromatids at each homologous pair twist around one another
The chromatids break and rejoin with chromatids of their homologous pair thus exchanges / recombines alleles between (non-sister) chromatids to produce recombinants

Explain how offspring with “chromosomes full of damaged genes are eliminated by natural selection, whereas others inherit undamaged copies and survive to reproduce”
Damaged genes can’t be expressed
So functional proteins, which are important for survival, can’t be made
This gives them a selective disadvantage
They can’t survive and reproduce

Explain how sex could be determined by environmental factors
Gene codes for sperm cells / egg cells 
Temperature as environmental factor
Temp doesn't change the number of genes or the sequence of bases in DNA
Temp only affects gene expression / transcription 
By changing the activity of transcription factors 
Epigenetic modification

Environmental stimulus is given to unspecialised cells
Due to epigenetic modification / DNA methylation / histone modification, some genes responsible
for sex determination are switched on and become active while some are off and become
inactive
Environmental factors, e.g. temperature affect the activity of spliceosomes, leading to some
Spliceosomes being active to make some male or female - determining proteins
By removing introns, exons remain
The proteins may be regulatory proteins to manipulate the expression of some  sex-determining genes

Explain why at first the proto-Y “could still swap genes with its partner, the proto-X chromosome” and why it can’t be swapped after 180 million years ago
no longer homologous, no crossing over possible

Explain how to compare the Y chromosomes of the eight mammals to trace the evolutionary history
Using the methods of bioinformatics
Sequence the genome of the Y chromosomes of the 8 species
Align them together for comparison about the similarity or difference in genes / molecular phylogeny
Construct phylogenetic tree

Explain how scientists can compare the chromosomes of 15 different mammal species and one bird
Use the method of bioinformatics
Sequence the DNA
Annotate the genome to identify the locations of genes and determine what those genes do
DNA sequence alignment
Every time the DNA sequence of the same genes are found out

Explain how it is related to the fact that it is always the regulatory genes that remain for each evolution
They are genes that code for proteins that control the expression of structural/other genes
It could be a gene that codes for a repressor protein that inhibits the activity of an operator of a nearby gene
So that energy/resources can be saved for transcription and subsequent translation of the gene
It could be a gene code for an activator protein
That binds to a site on the DNA molecule and causes an increase in transcription of a nearby gene
The gene could for protein which is important for metabolic function (or specific examples)

Explain the evolutionary process that can fix the problem of less protein production from a single X chromosome by ramping up production from it
Mutation occurred which made the X chromosome has more protein production
These are regulatory protein
This gives them a selective advantage
Only male species with the mutated allele will survive
They reproduce and pass advantageous allele to offspring

Suggest why “protein produced by the regulatory genes retained on the Y had to be so precisely
Calibrated”
Regulatory proteins, especially transcription factors, if mis-regulated, can mis-regulate expression of proteins
Leading to changes in gene expression or cellular function
There is a gene (e.g. sex-determining Region Y) coding for a transcription factor
The expression of it must occur within a specific critical period during embryonic development and at a sufficient level
Too little or too late may result in incomplete testicular development or the development of ovotestes (a gonad with both testicular and ovarian aspects)
Some Y-linked genes encode RNA-binding proteins or other regulatory factors
Insufficiency can lead to stopping at specific stages of spermatogenesis, resulting in low sperm count or no sperm at all
`;
const trimmedQuestionBank = questionBank.trim();

// Split the question bank into individual entries
const entries = trimmedQuestionBank.split("\n\n");

// Parse the entries into a structured format
const parsedQuestions = entries.map(entry => {
    const lines = entry.split("\n");
    // const topic = lines[0];
    const question = lines[0];
    const modelAnswer = lines.slice(2); // Remaining lines are model answers
    return {question, model_answer: modelAnswer };
});

// Filter questions by topics
const relevantQuestions = parsedQuestions;

// Shuffle the relevant questions for randomness
const shuffledQuestions = relevantQuestions.sort(() => Math.random() - 0.5);

// If n exceeds the available questions, adjust n
const numAvailable = shuffledQuestions.length;
if (n > numAvailable) {
    console.warn(`Requested ${n} questions, but only ${numAvailable} available for the given topics.`);
    n = numAvailable; // Adjust n to the maximum available
}

// Select the first n questions from the shuffled list
const selectedQuestions = shuffledQuestions.slice(0, n);

// Format the output as required
return selectedQuestions.map(q => ({
    question: q.question,
    model_answer: q.model_answer,
}));
}